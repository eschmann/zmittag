<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>zmittag</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- styling -->
        <link rel="stylesheet" href="/bower_components/angular-material/angular-material.css">
        <link rel="stylesheet" href="/css/style.css">
        <!-- angular -->
        <script src="/bower_components/angular/angular.js"></script>
        <script src="/bower_components/angular-route/angular-route.js"></script>
        <!-- material -->
        <script src="/bower_components/angular-animate/angular-animate.js"></script>
        <script src="/bower_components/angular-aria/angular-aria.js"></script>
        <script src="/bower_components/hammerjs/hammer.js"></script>
        <script src="/bower_components/angular-material/angular-material.js"></script>
        <!-- google maps -->
        <script src='//maps.googleapis.com/maps/api/js?sensor=false'></script>
        <script src='/bower_components/lodash/dist/lodash.min.js'></script>
        <script src='/bower_components/bluebird/js/browser/bluebird.js'></script>
        <script src="/bower_components/angular-google-maps/dist/angular-google-maps.js"></script>
        <!-- md5 -->
        <script src="/bower_components/angular-md5/angular-md5.js"></script>
        <!-- local storage -->
        <script src="/bower_components/angular-local-storage/dist/angular-local-storage.min.js"></script>
        <!-- angular app -->
        <script src="/js/scripts.js"></script>
        <!-- font and icons -->
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    </head>
    <body ng-app="zmittagApp">
        <div id="main" ng-controller="mainController">
            <material-content>
                <material-toolbar id="header" class="material-theme-dark">
                    <div class="material-toolbar-tools">
                        <h2><span>zMittag</span></h2>
                        <span flex></span>
                        <gravatar>
                    </div>
                </material-toolbar>
                <material-tabs selected="data.selectedIndex" center>
                    <material-tab label="JOIN">
                        <material-card class="form" style="background: white;" ng-hide="!isValidUser" ng-if="!userIsSubmitted()">
                            <p>Please provide your name and email address:</p>
                            <form>
                                <tf-float label="Name" value="user.name" ng-model="user.name" ng-model-onblur></tf-float>
                                <tf-float label="Email" value="user.email" ng-model="user.email" ng-model-options="{updateOn: 'blur'}"></tf-float>
                                <material-button class="material-theme-light-blue" ng-click="submitUserCredentials()">
                                    Save
                                </material-button>
                            </form>
                        </material-card>
                        <material-card class="card" ng-repeat="d in destinations" style="background: white;" ng-class="{ active: isActive(d.id), joined: hasJoined(d.id) }" ng-click="setActive(d.id)">
                            <span class="joined-icon"><i class="fa fa-check-circle"></i></span>
                            <h2>{{ d.name }} <span class="badge">{{ d.memberList.length > 0 ? d.memberList.length : 0 }}</span></h2>
                            <p>{{ d.id }}</p>
                            <div ng-if="isActive(d.id)">
                                <ul class="user-list">
                                    <li ng-repeat="u in d.memberList">
                                        <img src="http://www.gravatar.com/avatar/{{ md5(u.email) }}?s=40" alt=""><br>
                                        {{ u.name }}
                                    </li>
                                </ul>
                                <material-button class="material-theme-green join-group" ng-click="joinGroup(d.id)" ng-if="!hasJoined(d.id)">
                                    Join!
                                </material-button>
                            </div>
                        </material-card>
                        <material-whiteframe class="info" layout ng-if="destinations.length == 0" layout-align="center center">
                            <span>No suggestions, yet. Be the first one!</span>
                        </material-whiteframe>
                        <h3 class="recommendations">Recommendations:</h3>
                    </material-tab>
                    <material-tab label="SUGGEST"><div id="suggest">
                        <div class="search">
                            <form>
                                <tf-float label="Search archive.." value="search.archive" ng-model="search.archive" ng-model-onblur></tf-float>
                            </form>
                        </div>

                        <!-- <material-card class="map" style="background: white;">
                            <ui-gmap-google-map center="map.center" zoom="map.zoom"></ui-gmap-google-map>
                        </material-card> -->
                    </div></material-tab>
                </material-tabs>
            </material-content>
        </div>
    </body>
</html>